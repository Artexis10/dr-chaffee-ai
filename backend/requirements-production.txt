# Production requirements for CPU-only API deployment (Hetzner + Coolify)
# Excludes: GPU dependencies, ASR/diarization, ingestion pipeline
# Use this for backend API servers that only serve search/answer endpoints
#
# CRITICAL: Install order matters! See Dockerfile for proper sequence.
# NumPy MUST be installed before PyTorch to prevent NumPy 2.x from being pulled in.

# ============================================================================
# NUMPY (MUST BE FIRST - installed in Dockerfile before PyTorch)
# ============================================================================
# numpy==1.24.3  # Installed first in Dockerfile, compatible with torch 2.1.2

# ============================================================================
# PYTORCH CPU-ONLY (installed in Dockerfile after NumPy)
# ============================================================================
# torch==2.1.2+cpu
# torchvision==0.16.2+cpu
# torchaudio==2.1.2+cpu
# Installed via: pip install --index-url https://download.pytorch.org/whl/cpu

# ============================================================================
# CORE DEPENDENCIES (safe to install anytime)
# ============================================================================
psycopg2-binary==2.9.11
alembic==1.17.2
sqlalchemy==2.0.44
python-dotenv==1.2.1
tqdm==4.67.1
isodate==0.7.2
psutil==5.9.8

# ============================================================================
# WEB API
# ============================================================================
fastapi==0.121.3
uvicorn[standard]==0.38.0
python-multipart==0.0.20
aiofiles==23.2.1

# ============================================================================
# EMBEDDINGS (installed AFTER PyTorch in Dockerfile)
# ============================================================================
# Versions compatible with torch==2.1.2 and numpy==1.24.3
sentence-transformers==2.7.0
transformers==4.57.1
tokenizers==0.22.1
huggingface-hub==0.36.0
safetensors==0.7.0
regex==2023.12.25
requests==2.32.5
filelock==3.20.0
packaging==23.2

# ============================================================================
# OPENAI (for answer generation)
# ============================================================================
openai==1.109.1

# ============================================================================
# EXCLUDED FROM PRODUCTION
# ============================================================================
# The following are NOT needed for API-only deployment:
# - celery, redis (background jobs - not used in API)
# - youtube-transcript-api, yt-dlp (ingestion only)
# - google-api-python-client (ingestion only)
# - faster-whisper, ctranslate2 (ASR - ingestion only)
# - pyannote.audio, speechbrain (diarization - ingestion only)
# - soundfile, webvtt-py (audio processing - ingestion only)
# - asyncio-throttle, apscheduler, aiohttp (ingestion only)
# - black, ruff, pytest (development only)
